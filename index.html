<!doctype html>
<html lang="zh-Hant" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>郵局廂號查詢</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div>
      <h1>郵局廂號查詢</h1>
      <div class="muted">Supabase（Postgres）｜查詢公開、編輯需通關碼</div>
    </div>
    <div class="row" style="gap:8px; justify-content:flex-end;">
      <button id="editModeBtn" class="btn">編輯模式：未解鎖</button>
      <button id="themeBtn" class="btn">切換深/淺色</button>
    </div>
  </header>

  <main class="grid">
    <!-- 查詢 -->
    <section class="card span2">
      <h2>查詢</h2>

      <div class="row" style="margin-bottom:8px;">
        <button id="modeAll" class="btn primary" type="button">全欄位</button>
        <button id="modeAddr" class="btn" type="button">只查地址</button>
        <button id="modeBox" class="btn" type="button">只查廂號</button>
        <button id="modeBorrower" class="btn" type="button">只查姓名/公司</button>
      </div>

      <input id="q" class="input" placeholder="例：新進路 王小明（可用空格分詞）／ 37" />

      <div class="row">
        <button id="searchBtn" class="btn primary" type="button">查詢</button>
        <button id="clearBtn" class="btn" type="button">清空</button>
        <button id="newBtn" class="btn" type="button" style="margin-left:auto; display:none;">＋新增</button>
      </div>

      <div id="status" class="muted"></div>
      <div id="result"></div>
    </section>

    <!-- 備份 / 還原提示 -->
    <section class="card">
      <h2>備份 / 還原</h2>
      <div class="muted">
        已開啟修改紀錄（C2）。如果不小心改錯，可以在 Supabase 看到歷史紀錄表，再手動還原。
      </div>
      <div class="muted" style="margin-top:8px;">
        小提醒：你用的是通關碼（P1），通關碼會在 Supabase 的 RPC 驗證；不要把通關碼寫進 GitHub 公開程式碼。
      </div>
    </section>
  </main>

  <script type="module" src="app.js?v=del1"></script>
</body>
</html>
